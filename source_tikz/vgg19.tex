\documentclass[tikz, border=50pt]{standalone}

\usepackage{tikz}
\usepackage{medl_colors}
\usepackage{amsmath,xstring}
\usepackage{ifthen}
\usepackage{geometry}
\usepackage{graphicx}

\usetikzlibrary{shapes.multipart, shapes.geometric, arrows.meta, decorations.pathreplacing, calligraphy}
\usetikzlibrary{matrix, calc, positioning,fit, backgrounds,3d}  

\graphicspath{ {./images/} }

\def\outputs{{0,1000,999,2,1}}

\begin {document}
\begin{tikzpicture}

\newcommand\cube[8]
{
\filldraw[fill=#7, draw=#8] (#1+#4,#2,#3) -- (#1+#4,#2+#5,#3) -- (#1,#2+#5,#3) -- (#1,#2,#3) -- cycle;
\filldraw[fill=#7, draw=#8] (#1+#4,#2,#3) -- (#1+#4,#2,#3+#6) -- (#1+#4,#2+#5,#3+#6) -- (#1+#4,#2+#5,#3) -- cycle;
\filldraw[fill=#7, draw=#8] (#1+#4,#2+#5,#3) -- (#1,#2+#5,#3) -- (#1,#2+#5,#3+#6) -- (#1+#4,#2+#5,#3+#6) -- cycle;
}

\node[canvas is zy plane at x=0,draw,fill=white] (inputpic) at (-2,3,-3) {\includegraphics[scale=.14]{images/bird.jpeg}};


\cube{0}{0}{0}{.2}{6}{-6}{blue0}{blue1}
\cube{.5}{0}{0}{.2}{6}{-6}{blue0}{blue1}

\cube{1.5}{1}{1}{.2}{5}{-5}{green0}{green1}
\cube{1.9}{1}{1}{.4}{5}{-5}{blue0}{blue1}
\cube{2.5}{1}{1}{.4}{5}{-5}{blue0}{blue1}

\cube{3}{1.5}{.5}{.4}{4}{-4}{green0}{green1}
\cube{3.7}{1.5}{.5}{.6}{4}{-4}{blue0}{blue1}
\cube{4.6}{1.5}{.5}{.6}{4}{-4}{blue0}{blue1}
\cube{5.4}{1.5}{.5}{.6}{4}{-4}{blue0}{blue1}
\cube{6.2}{1.5}{.5}{.6}{4}{-4}{blue0}{blue1}

\cube{7}{2.1}{.5}{.6}{3}{-3}{green0}{green1}
\cube{7.9}{2.1}{.5}{.8}{3}{-3}{blue0}{blue1}
\cube{9}{2.1}{.5}{.8}{3}{-3}{blue0}{blue1}
\cube{10}{2.1}{.5}{.8}{3}{-3}{blue0}{blue1}
\cube{11}{2.1}{.5}{.8}{3}{-3}{blue0}{blue1}

\cube{12}{2.7}{.5}{.8}{2}{-2}{green0}{green1}
\cube{13}{2.7}{.5}{.8}{2}{-2}{blue0}{blue1}
\cube{14}{2.7}{.5}{.8}{2}{-2}{blue0}{blue1}
\cube{15}{2.7}{.5}{.8}{2}{-2}{blue0}{blue1}
\cube{16}{2.7}{.5}{.8}{2}{-2}{blue0}{blue1}
\cube{17}{3.3}{.5}{.8}{1}{-1.5}{green0}{green1}

\node[] (first) at (-1.5,8,-3) {3 x 224 x 224};

\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, thick] (2.2,8.5) -- (3,8.5) node[above right =.25cm and -1.5cm]{64 x 224 x 224 };
\draw [-Triangle, draw=black!50] (0.1,-2,-3) -- node[pos=-.4] { 64 x 112 x 112 } ++(0,1.3);

\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, thick] (3.5,7.7) -- (4.4,7.7) node[above right =.25cm and -1cm]{128 x 112 x 112 };
\draw [-Triangle, draw=black!50] (1.9,-1,-3) -- node[pos=-.4] { 128 x 56 x 56 } ++(0,.9);

\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, thick] (5,7) -- (8.2,7) node[above left =.25cm and .5cm]{256 x 56 x 56};
\draw [-Triangle, draw=black!50] (6,-1,-3) -- node[below left = .9 and -.5] { 256 x 28 x 28 } ++(0,1.5);
\draw [Triangle-, draw=red, line width=1mm] (8.1, 1.7) -- (8.1, 0.1);

\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, thick] (8.9,6.2) -- (12.8,6.2) node[above left =.25cm and .7cm]{512 x 28 x 28};
\draw [-Triangle, draw=black!50] (11,0,-3) -- node[pos=-.2] { 512 x 14 x 14 } ++(0,1.1);

\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, thick] (13.5,5.4) -- (17.4,5.4) node[above left =.25cm and .5cm]{512 x 14 x 14 };
\draw [-Triangle, draw=black!50] (16,.1,-3) -- node[pos=-.15] { 512 x 7 x 7 } ++(0,1.6);
\draw [-Triangle, draw=black!50, ultra thick] (18, 4) -- node[pos=1.6] {} ++(1.5,0);

\foreach \i in {1,...,2}
{
    \foreach \j in {1,...,6}
    {
        \ifthenelse{\j > 3}
        {
            \pgfmathparse{int(\j)} \edef\pj{\pgfmathresult};
        }
        {
            \pgfmathparse{int(\j-.5)} \edef\pj{\pgfmathresult};
        }    
        \node[circle, draw, minimum size = .5cm, fill=blue1 ] (column-\i\j) at (18.5+\i*1.2, \pj+1) {};
    }
}

\foreach \j in {1,...,4}
{
    \ifthenelse{\j > 2}
    {
        \pgfmathparse{int(\j)} \edef\pj{\pgfmathresult};
    }
    {
        \pgfmathparse{int(\j-.5)} \edef\pj{\pgfmathresult};
    }  
    \node[circle, draw, minimum size = .5cm, fill=blue1 ] (column-3\j) at (23.5, \pj+2) {};
}


  \foreach \i in {1,...,6}{
    \foreach \j in {1,...,6}{
        \draw[-Triangle, draw=black!50] (column-1\i) -- (column-2\j);
        \ifthenelse{\j < 5}
        {
            \draw[-Triangle, draw=black!50] (column-2\i) -- (column-3\j);
            \pgfmathparse{\outputs[\j]}\let\outs\pgfmathresult
            \draw [-Triangle, draw=black!50] (column-3\j) -- node[pos=1.7, text=black!50] { $\hat{y}_{\outs}$} ++(1,0);
        }
        {}
    }
  }

\draw[thick, dotted] ([yshift=2mm]column-13.north) -- ([yshift=-2mm]column-14.south);
\draw[thick, dotted] ([yshift=2mm]column-23.north) -- ([yshift=-2mm]column-24.south);
\draw[thick, dotted] ([yshift=2mm]column-32.north) -- ([yshift=-2mm]column-33.south);

\node[above of = column-16, node distance = .75cm] (first-c) {4096};
\node[above of = column-26, node distance = .75cm] (first-c) {4096};
\node[above of = column-34, node distance = .75cm] (first-c) {1000};
\end{tikzpicture}
\end{document}