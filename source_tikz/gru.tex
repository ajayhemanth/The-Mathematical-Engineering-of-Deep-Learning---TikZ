\documentclass[tikz, border=50pt]{standalone}

\usepackage{tikz}
\usepackage{medl_colors}
\usepackage{amsmath,xstring}
\usepackage{ifthen}
\usetikzlibrary{shapes.multipart, shapes.geometric, arrows.meta, decorations.pathreplacing, calligraphy}
\usetikzlibrary{matrix, calc, positioning,fit, backgrounds}
\usetikzlibrary{decorations.markings}

\begin{document}

\tikzset{middlearrow/.style={
        decoration={markings,
            mark= at position .1 with {\arrow{Triangle}}
        },
        postaction={decorate}
    }
}

\begin{tikzpicture}[node distance=2cm]

\node[rounded corners, draw, inner xsep = 3mm, inner ysep=1cm, fill=blue1, minimum width=8.5cm,minimum height=7cm] (largerec) at(-.5,0){};

\matrix[row sep=0.8cm,column sep=0.8cm] {
    \node (hid) { }; &
    &
    \node [draw, circle, minimum size=.6cm] (circle1) { . }; &
    \node [draw, circle, minimum size=.6cm, xshift=2cm] (circle2) { + }; &
    \\
    \node [draw, circle, minimum size=.6cm] (circle3) { . }; &
    &
    \node [draw, circle, minimum size=.6cm] (circle4) { $1 - $ }; &
    \node [draw, circle, minimum size=.6cm,  xshift=2cm, yshift=-1cm] (circle5) { . }; &
    \\
    &
    \node (rect) [draw, rounded corners, fill=yellow1, minimum width=.6cm,minimum height=1.2cm] (rect1) { {$ g_r ^{\langle{} t \rangle{} } $ }}; &
    \node (rect) [draw, rounded corners, fill=yellow1, minimum width=.6cm,minimum height=1.2cm] (rect2) { {$ g_u ^{\langle{} t \rangle{} } $ }}; &
    \node (rect) [draw, rounded corners, fill=blue0, minimum width=.6cm,minimum height=1.2cm,  xshift=2cm] (rect3) { {$ \tilde h^{\langle{}t\rangle{}}$ }}; &
    \\
    \node (hid1) { }; &
    \node (hid2) { }; &
    \node (hid3) { }; &
    \node [yshift=-.5cm] (hid4) { }; &
    \\
    };

\node [rounded corners, draw, fill=green1, minimum width=1.3cm, minimum height=2cm] at ($(rect1.east)+(-2.5,-4.5)$)(rect5)  {$ x ^{\langle{} t \rangle{} } $};

\node [rounded corners, draw, fill=blue0, minimum width=1.3cm, minimum height=2cm, left of = circle1, node distance = 6cm] (rect6)  {$ h ^{\langle{} t-1 \rangle{} } $};

\node [rounded corners, draw, fill=blue0, minimum width=1.3cm, minimum height=2cm, right of = circle2, node distance = 4cm] (rect7)  {$ h ^{\langle{} t \rangle{} } $};

\node [rounded corners, draw, fill=blue0, minimum width=1.3cm, minimum height=2cm, above right = 1cm and 1cm of circle2] (rect8)  {$ h ^{\langle{} t \rangle{} } $};

%Connecting first row and second row

\draw[middlearrow](rect6) -- (circle1);
\draw (circle1) -- (circle2);
\draw[Triangle-] (rect8) -- (rect8 |- circle2);
\draw[-Triangle] (circle2) -- (rect7);
\draw[-Triangle] (hid) -- (circle3);
\draw[-Triangle] (circle4.north) -- (circle1.south);
\draw[-Triangle] (circle5.north) -- (circle2.south);
\draw[Triangle-] (circle5) -- (rect2 |- circle5);

%Connecting second row and third row
\draw (circle3) -- (hid1);
\draw[-Triangle] (rect1) |- (circle3);
\draw (circle4) -- (rect2);
\draw (rect3.north) -- (circle5.south);

%Connecting third row and third row
\draw (rect1) -- (hid2.center) node[midway,anchor=center, fill=blue1] {$S_{\text{Sig}}(\cdot)$};
\draw (rect2) -- (hid3.center) node[midway,anchor=center, fill=blue1] {$S_{\text{Sig}}(\cdot)$};
\draw (rect3) -- ([xshift=2cm]hid4.center) node[midway,anchor=center, fill=blue1] {$S_{\text{Tanh}}(\cdot)$};
\draw (hid3) -- (rect5 |- hid3);
\draw (rect5 |- hid4) -- ++(7,0);

\draw (hid1) -- (hid1 |- hid4);
\draw[middlearrow] (rect5) -- (rect5 |- hid);

\end{tikzpicture}
\end{document}