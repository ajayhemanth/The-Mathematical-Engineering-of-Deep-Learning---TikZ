\documentclass[tikz, border=50pt]{standalone}

\usepackage{tikz}
\usepackage{medl_colors}
\usepackage{amsmath,xstring}
\usepackage{ifthen}
\usetikzlibrary{shapes.multipart, shapes.geometric, arrows.meta, decorations.pathreplacing, calligraphy}
\usetikzlibrary{matrix, calc, positioning,fit, backgrounds}
\usetikzlibrary{decorations.markings}

\begin{document}

\tikzset{middlearrow/.style={
        decoration={markings,
            mark= at position .1 with {\arrow{Triangle}}
        },
        postaction={decorate}
    }
}

\begin{tikzpicture}[node distance=2cm]

\node[lightblueshape,rounded corners,inner xsep = 3mm, inner ysep=1cm, minimum width=8.5cm,minimum height=7cm] (largerec) at(-.5,0){};

\matrix[row sep=0.8cm,column sep=0.8cm] {
    \node (hid) { }; &
    &
    \node [draw, uthickline,circle, minimum size=.6cm] (circle1) { . }; &
    \node [draw, uthickline, circle, minimum size=.6cm, xshift=2cm] (circle2) {\small $+$ }; &
    \\
    \node [draw, uthickline, circle, minimum size=.6cm] (circle3) { . }; &
    &
    \node [draw, uthickline,circle, minimum size=.6cm] (circle4) {\tiny $1 - $ }; &
    \node [draw, uthickline, circle, minimum size=.6cm,  xshift=2cm, yshift=-1cm] (circle5) { . }; &
    \\
    &
    \node (rect) [yellowshape, rounded corners, minimum width=.6cm,minimum height=1.2cm] (rect1) { {$ g_r ^{\langle{} t \rangle{} } $ }}; &
    \node (rect) [yellowshape, rounded corners, minimum width=.6cm,minimum height=1.2cm] (rect2) { {$ g_u ^{\langle{} t \rangle{} } $ }}; &
    \node (rect) [lightgreyshape, rounded corners, minimum width=.6cm,minimum height=1.2cm,  xshift=2cm] (rect3) { {$ \tilde h^{\langle{}t\rangle{}}$ }}; &
    \\
    \node (hid1) { }; &
    \node (hid2) { }; &
    \node (hid3) { }; &
    \node [yshift=-.5cm] (hid4) { }; &
    \\
    };

\node [greenshape,rounded corners, minimum width=1.3cm, minimum height=2cm] at ($(rect1.east)+(-2.5,-4.5)$)(rect5)  {\large $ x^{\langle{} t \rangle{} } $};

\node [blueshape, rounded corners, minimum width=1.3cm, minimum height=2cm, left of = circle1, node distance = 6cm] (rect6)  {\large $ h ^{\langle{} t-1 \rangle{} } $};

\node [blueshape, rounded corners, minimum width=1.3cm, minimum height=2cm, right of = circle2, node distance = 4cm] (rect7)  {\large $ h ^{\langle{} t \rangle{} } $};

\node [blueshape, rounded corners, minimum width=1.3cm, minimum height=2cm, above right = 1cm and 1cm of circle2] (rect8)  {\large $ h ^{\langle{} t \rangle{} } $};

%Connecting first row and second row

\draw[middlearrow,thickline](rect6) -- (circle1);
\draw [thickline](circle1) -- (circle2);
\draw[Triangle-,thickline] (rect8) -- (rect8 |- circle2);
\draw[-Triangle,thickline] (circle2) -- (rect7);
\draw[-Triangle,thickline] (hid) -- (circle3);
\draw[-Triangle,thickline] (circle4.north) -- (circle1.south);
\draw[-Triangle,thickline] (circle5.north) -- (circle2.south);
\draw[Triangle-,thickline] (circle5) -- (rect2 |- circle5);

%Connecting second row and third row
\draw [thickline](circle3) -- (hid1);
\draw[-Triangle,thickline] (rect1) |- (circle3);
\draw [thickline](circle4) -- (rect2);
\draw [thickline](rect3.north) -- (circle5.south);

%Connecting third row and third row
\draw [thickline](rect1) -- (hid2.center) node[midway,anchor=center,fill=fill-light-blue] {$S_{\text{Sig}}(\cdot)$};
\draw [thickline](rect2) -- (hid3.center) node[midway,anchor=center, fill=fill-light-blue] {$S_{\text{Sig}}(\cdot)$};
\draw [thickline](rect3) -- ([xshift=2cm]hid4.center) node[midway,anchor=center, fill=fill-light-blue] {$S_{\text{Tanh}}(\cdot)$};
\draw [thickline](hid3) -- (rect5 |- hid3);
\draw [thickline](rect5 |- hid4) -- ++(7,0);

\draw [thickline](hid1) -- (hid1 |- hid4);
\draw[middlearrow,thickline] (rect5) -- (rect5 |- hid);

\end{tikzpicture}
\end{document}