\documentclass[tikz, border=50pt]{standalone}

\usepackage{tikz}
\usepackage{medl_colors}
\usepackage{amsmath,xstring}
\usepackage{ifthen}
\usetikzlibrary{shapes.multipart, shapes.geometric, arrows.meta, decorations.pathreplacing, calligraphy}
\usetikzlibrary{matrix, calc, positioning,fit, backgrounds, shapes}

\tikzstyle{yellow_rect} = [rectangle, draw=fyellow, fill=fyellow!80, text = black, minimum width=3cm, ultra thick, align=center]
\tikzstyle{blue_rect} = [rectangle, draw=fblue, fill=fblue!80, text = black, minimum width=3cm, ultra thick, align=center]
\tikzstyle{green_rect} = [rectangle, draw=fgreen, fill=fgreen!80, ultra thick, text = black, minimum width=3cm, align=center]

\begin {document}

\newcommand\flow[2]{
\node[blue_rect] (node#1-1) at (#2, 0) {ReLU};
\node[circle, draw=fblue, fill=fblue, text = white, align=center, below of = node#1-1] (node#1-2) {+};
%\node[yellow_rect, below of = node#1-2] (node#1-3) {Batch norm};
\node[green_rect, below of = node#1-2] (node#1-3) {Convolution};
\node[below of = node#1-2, node distance=2.2cm] (node#1-3-1) {};
\node[below of = node#1-2, node distance=3.2cm] (node#1-3-2) {};
\node[blue_rect, below of = node#1-3, node distance=3cm] (node#1-4) {ReLU};
%\node[yellow_rect, below of = node#1-5] (node#1-6) {Batch norm};
\node[green_rect, below of = node#1-4, node distance=0.54cm] (node#1-5) {Convolution};
\node[below of = node#1-5, node distance=1.5cm] (node#1-6) {\Large $u = a^{[\ell]}$};
\node[above of = node#1-1, node distance=1cm] (node#1-7) {\Large $a^{[\ell + \tilde{\ell}]}$};
\node[left of = node#1-3-2, node distance=3cm] (node#1-7) {\Large $r(u)$};

\draw[-Triangle, draw=black!50, ultra thick] (node#1-1) -- ++(0, .7);
\draw[-Triangle, draw=black!50, ultra thick] (node#1-2) -- (node#1-1);
\draw[-Triangle, draw=black!50, ultra thick] (node#1-3) -- (node#1-2);
\draw[-Triangle, draw=black!50, loosely dashed, ultra thick] (node#1-4) -- (node#1-3);
\draw[-Triangle, draw=black!50, ultra thick] (node#1-3-1) -- (node#1-3);
\draw[-Triangle, draw=black!50, ultra thick] (node#1-4) -- (node#1-3-2);
%\draw[-Triangle, draw=black!50, thick] (node#1-5) -- (node#1-4);
\draw[-Triangle, draw=black!50, ultra thick] (node#1-6) -- (node#1-5);
%\draw[-Triangle, draw=black!50, thick] (node#1-7) -- (node#1-6);
%\draw[-Triangle, draw=black!50, thick] (node#1-8) -- (node#1-7);

%\draw[draw=black!50, loosely dashed, ultra thick] (#2-2,-1.8) rectangle ++(4, -4.7);
\draw[decorate, decoration={calligraphic brace,amplitude=5pt}, pen colour={black!50}, ultra thick, rotate=0] (-1.7,-6.5) -- (-1.7,-2) node[above left =.25cm and .7cm]{};
}

\begin{tikzpicture}[node distance=1.2cm]
\sffamily
\flow{1}{0}
%\flow{2}{8}
%\node[green_rect, right of = node2-5, node distance=4cm] (node3-5) {1 x 1 Conv};

%\draw[-Triangle, draw=black!50, ultra thick] ([yshift=3mm]node2-8.north) -| (node3-5);
%\draw[-Triangle, draw=black!50, ultra thick] (node3-5) |- (node2-2);
\draw[-Triangle, draw=black!50, ultra thick] ([yshift=3mm]node1-6.north) -| ++(2.5cm, 0) |- (node1-2);


\end{tikzpicture}
\end{document}